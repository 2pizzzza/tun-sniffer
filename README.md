
# tunShiffer

`tunShiffer` — консольная утилита на Go, создающая TUN-интерфейс и логирующая информацию о TCP/UDP пакетах, проходящих через него.

## Описание

Программа:
- Создаёт виртуальный TUN-интерфейс (например, `tun0`);
- Назначает ему IP и маршрут;
- Считывает пакеты из интерфейса;
- Определяет протокол (TCP/UDP), IP-адреса источника и назначения, порты;
- Логирует информацию о пакете и его байтовое содержимое(stdout и в файл tun.log).

## Структура проекта

```
.
├── cmd/                # Точка входа (main.go)
├── config/             # Конфигурационный файл (YAML)
├── internal/           # Внутренние пакеты
│   ├── app/            # Инициализация приложения
│   ├── config/         # Загрузка конфигурации
│   ├── logger/         # Логирование в файл и консоль
│   └── tun/            # Работа с TUN-интерфейсом
├── pkg/packet/         # Парсинг сетевых пакетов
├── tun.log             # Лог-файл
├── Makefile            # Сборка и запуск
├── go.mod / go.sum     # Модули Go
└── README.md           # Этот файл
```

## Установка и запуск

```bash
# Запуск (нужны root-права)
make run
```

## Конфигурация

Файл `config/config.yml`:

```yaml
tun_name: "tun0"
tun_ip: "10.0.0.1"
tun_mask: "24"
log_path: "tun.log"
```
## Пример c netcat

```bash
echo "hello from udp" | nc -u 10.0.0.2 12345
```

```bash
 echo "hello from tcp" | nc 10.0.0.2 1234 
```



## Пример логов

```
2025/04/07 14:01:02
  Message: Packet received
  Packet: {SrcIP:192.168.1.10 DstIP:10.0.0.1 SrcPort:443 DstPort:52000 Proto:TCP}
  Raw Bytes: 4500003c1c4640004006...
```

## Зависимости

- [songgao/water](https://github.com/songgao/water) — для создания TUN-интерфейса.

## Примечание

Для корректной работы требуются `iproute2` утилиты (`ip link`, `ip addr`, `ip route`).

